@using Backend.CMS.Web.Services
@inject IDialogService DialogService

<div class="text-center sm:text-left">
    <div class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 dark:bg-blue-900 sm:mx-0 sm:h-10 sm:w-10 mb-4">
        <i class="fas fa-info-circle text-blue-600 dark:text-blue-400"></i>
    </div>

    <div class="mt-3 sm:mt-0 sm:ml-4">
        <p class="text-sm text-gray-500 dark:text-gray-400">
            @Message
        </p>
    </div>
</div>

<div class="mt-5 sm:mt-4 sm:flex sm:justify-end">
    <button @onclick="HandleOk"
            type="button"
            disabled="@isLoading"
            class="w-full inline-flex justify-center rounded-lg border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed transition-colors">
        @if (isLoading)
        {
            <i class="fas fa-spinner fa-spin mr-2"></i>
        }
        else
        {
            <i class="fas fa-check mr-2"></i>
        }
        @OkText
    </button>
</div>

@code {
    [Parameter] public string DialogId { get; set; } = string.Empty;
    [Parameter] public string Message { get; set; } = "Information message";
    [Parameter] public string OkText { get; set; } = "OK";

    private bool isLoading = false;

    private async Task HandleOk()
    {
        if (isLoading) return;

        isLoading = true;
        StateHasChanged();

        // Small delay to show loading state
        await Task.Delay(200);

        await DialogService.CloseAsync(DialogId, true);
    }
}